import matplotlib.pyplot as plt
import pandas as pd

data = [
(1,"2022-10-18",18),(2,"2022-10-21",16),(3,"2022-10-23",8),(4,"2022-10-25",2),
(5,"2022-10-27",19),(6,"2022-10-29",11),(7,"2022-11-01",19),(8,"2022-11-03",27),
(9,"2022-11-07",16),(10,"2022-11-11",9),(11,"2022-11-13",17),(12,"2022-11-16",19),
(13,"2022-11-18",20),(14,"2022-11-20",41),(15,"2022-11-23",18),(16,"2022-11-25",20),
(17,"2022-11-27",21),(18,"2022-11-29",5),(19,"2022-12-02",26),(20,"2022-12-05",28),
(21,"2022-12-07",22),(22,"2022-12-10",34),(23,"2022-12-13",14),(24,"2022-12-16",12),
(25,"2022-12-18",17),(26,"2022-12-20",11),(27,"2022-12-25",24),(28,"2022-12-27",29),
(29,"2022-12-30",31),(30,"2023-01-02",54),(31,"2023-01-04",30),(32,"2023-01-10",29),
(33,"2023-01-13",16),(34,"2023-01-15",26),(35,"2023-01-19",24),(36,"2023-01-22",10),
(37,"2023-01-25",24),(38,"2023-01-27",29),(39,"2023-01-30",28),(40,"2023-02-01",14),
(41,"2023-02-04",14),(42,"2023-02-06",42),(43,"2023-02-08",31),(44,"2023-02-11",15),
(45,"2023-02-13",27),(46,"2023-02-14",18),(47,"2023-02-23",22),(48,"2023-02-24",42),
(49,"2023-02-26",32),(50,"2023-02-28",23),(51,"2023-03-02",19),(52,"2023-03-03",27),
(53,"2023-03-05",22),(54,"2023-03-07",23),(55,"2023-03-09",14),(56,"2023-03-11",22),
(57,"2023-03-13",38),(58,"2023-03-15",15),(59,"2023-03-17",15),(60,"2023-03-18",14),
(61,"2023-03-20",29),(62,"2023-03-22",9),(63,"2023-03-24",21),(64,"2023-03-26",15),
(65,"2023-03-28",17),(66,"2023-03-31",31),(67,"2023-04-02",25),(68,"2023-04-07",29),
(69,"2023-04-09",20)
]

df = pd.DataFrame(data, columns=["Game","Date","PTS"])

# 计算5场移动平均线
df['MA5'] = df['PTS'].rolling(window=5, min_periods=1).mean()

# 创建图表
plt.figure(figsize=(12, 6))

# 绘制原始数据点
# plt.plot(df["Game"], df["PTS"], marker='o', linewidth=1, markersize=4, 
#          label='单场得分', alpha=0.7, color='blue')

# 绘制5场移动平均线
plt.plot(df["Game"], df["MA5"], linewidth=3, color='red', 
         label='MA5')

plt.title("MA5", fontsize=16)
plt.xlabel("Game", fontsize=12)
plt.ylabel("Score", fontsize=12)
plt.grid(True, alpha=0.3)
plt.legend(fontsize=12)
plt.tight_layout()

# 显示图表
plt.show()

# 打印一些统计信息
print("数据统计:")
print(f"总场次: {len(df)}")
print(f"平均得分: {df['PTS'].mean():.2f}")
print(f"最高得分: {df['PTS'].max()}")
print(f"最低得分: {df['PTS'].min()}")
print(f"5场移动平均线范围: {df['MA5'].min():.2f} - {df['MA5'].max():.2f}")

